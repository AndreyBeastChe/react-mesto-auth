{"ast":null,"code":"import { checkResponse } from \"./api\";\n\nclass Auth {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  signUp(_ref) {\n    let {\n      email,\n      password\n    } = _ref;\n    return fetch(`${this._url}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this.checkResponse);\n  }\n\n  signIn(_ref2) {\n    let {\n      email,\n      password\n    } = _ref2;\n    debugger;\n    return fetch(`${this._url}/signip`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this.checkResponse).then(data => {\n      if (data.jwt) {\n        localStorage.setItem(\"jwt\", data.jwt);\n        return data;\n      }\n    });\n  }\n\n  checkAuth(jwt) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${jwt}`\n      }\n    }).then(this.checkResponse);\n  }\n\n}\n\nconst auth = new Auth({\n  url: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default auth;","map":{"version":3,"sources":["/Users/a-chechetkin/Documents/yandex_paktikum/mesto-react/src/utils/auth.js"],"names":["checkResponse","Auth","constructor","options","_url","url","_headers","headers","signUp","email","password","fetch","method","body","JSON","stringify","then","signIn","data","jwt","localStorage","setItem","checkAuth","Authorization","auth"],"mappings":"AAAA,SAASA,aAAT,QAA8B,OAA9B;;AAEA,MAAMC,IAAN,CAAW;AACTC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACnB,SAAKC,IAAL,GAAYD,OAAO,CAACE,GAApB;AACA,SAAKC,QAAL,GAAgBH,OAAO,CAACI,OAAxB;AACD;;AAEDC,EAAAA,MAAM,OAAsB;AAAA,QAArB;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAqB;AAC1B,WAAOC,KAAK,CAAE,GAAE,KAAKP,IAAK,SAAd,EAAwB;AAClCQ,MAAAA,MAAM,EAAE,MAD0B;AAElCL,MAAAA,OAAO,EAAE,KAAKD,QAFoB;AAGlCO,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEN,QAAAA,KAAF;AAASC,QAAAA;AAAT,OAAf;AAH4B,KAAxB,CAAL,CAIJM,IAJI,CAIC,KAAKhB,aAJN,CAAP;AAKD;;AAEDiB,EAAAA,MAAM,QAAsB;AAAA,QAArB;AAAER,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAqB;AAC1B;AACA,WAAOC,KAAK,CAAE,GAAE,KAAKP,IAAK,SAAd,EAAwB;AAClCQ,MAAAA,MAAM,EAAE,MAD0B;AAElCL,MAAAA,OAAO,EAAE,KAAKD,QAFoB;AAGlCO,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEN,QAAAA,KAAF;AAASC,QAAAA;AAAT,OAAf;AAH4B,KAAxB,CAAL,CAKJM,IALI,CAKC,KAAKhB,aALN,EAMJgB,IANI,CAMEE,IAAD,IAAU;AACd,UAAIA,IAAI,CAACC,GAAT,EAAc;AACZC,QAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BH,IAAI,CAACC,GAAjC;AACA,eAAOD,IAAP;AACD;AACF,KAXI,CAAP;AAYD;;AAEDI,EAAAA,SAAS,CAACH,GAAD,EAAM;AACb,WAAOR,KAAK,CAAE,GAAE,KAAKP,IAAK,WAAd,EAA0B;AACpCQ,MAAAA,MAAM,EAAE,KAD4B;AAEpCL,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEPgB,QAAAA,aAAa,EAAG,UAASJ,GAAI;AAFtB;AAF2B,KAA1B,CAAL,CAMJH,IANI,CAMC,KAAKhB,aANN,CAAP;AAOD;;AAtCQ;;AAyCX,MAAMwB,IAAI,GAAG,IAAIvB,IAAJ,CAAS;AACpBI,EAAAA,GAAG,EAAE,+BADe;AAEpBE,EAAAA,OAAO,EAAE;AACP,oBAAgB;AADT;AAFW,CAAT,CAAb;AAOA,eAAeiB,IAAf","sourcesContent":["import { checkResponse } from \"./api\";\n\nclass Auth {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n  }\n\n  signUp({ email, password }) {\n    return fetch(`${this._url}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email, password }),\n    }).then(this.checkResponse);\n  }\n\n  signIn({ email, password }) {\n    debugger;\n    return fetch(`${this._url}/signip`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({ email, password }),\n    })\n      .then(this.checkResponse)\n      .then((data) => {\n        if (data.jwt) {\n          localStorage.setItem(\"jwt\", data.jwt);\n          return data;\n        }\n      });\n  }\n\n  checkAuth(jwt) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${jwt}`,\n      },\n    }).then(this.checkResponse);\n  }\n}\n\nconst auth = new Auth({\n  url: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default auth;\n"]},"metadata":{},"sourceType":"module"}